/* ===========================================================
   CTL Global Header Styles
   Uses variables + utilities from /assets/css/base.css
   =========================================================== */

.ctl-header {
  position: sticky;
  top: 0;
  z-index: 50;
  background: var(--surface);
  border-bottom: 1px solid var(--line);
  box-shadow: var(--shadow-sm);
}

.ctl-header__inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 84px;
}

/* --- Logo --- */
.ctl-logo {
  font-family: var(--font-sans);
  font-weight: 700;
  font-size: 1.6rem;
  color: var(--primary);
  text-decoration: none;
}
.ctl-logo:hover { color: var(--primary); text-decoration: none;}

/* --- Navigation --- */
.ctl-nav {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.ctl-nav__link {
  color: var(--ink-800);
  text-decoration: none;
  font-weight: 500;
  padding: 8px 10px;
  border-radius: 6px;
}
.ctl-nav__link:hover,
.ctl-nav__link:focus-visible {
  background: rgba(14,129,226,0.08);
  color: var(--primary);
  outline: none;
}

/* --- Tools Dropdown --- */
.ctl-has-mega { position: relative; }
.ctl-nav__btn {
  background: transparent;
  border: none;
  font: 600 14px/1 var(--font-sans);
  color: var(--ink-800);
  padding: 8px 10px;
  border-radius: 6px;
  cursor: pointer;
}
.ctl-nav__btn:hover,
.ctl-nav__btn:focus-visible {
  background: rgba(14,129,226,0.08);
  color: var(--primary);
  outline: none;
}

/* --- Mega Menu --- */
.ctl-mega {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  top: calc(100% + 12px);
  width: min(980px, 95vw);
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--radius-card);
  box-shadow: var(--shadow-lg);
  padding: 16px;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity 0.15s ease, transform 0.2s ease;
}
.ctl-mega.is-open {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transform: translateX(-50%) translateY(0);
}

.ctl-mega__inner {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.ctl-mega__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.ctl-mega__title {
  margin: 0;
  font-weight: 600;
  color: var(--ink-900);
}

/* --- Mega Menu Grid --- */
.ctl-mega__grid {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 12px;
}
@media (max-width: 820px) {
  .ctl-mega__grid { grid-template-columns: repeat(2, 1fr); };
  /* .ctl-mobile-drawer{ display: none;} */
}

.ctl-mega__link {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  background: var(--surface);
  border: 1px solid var(--line);
  border-radius: 10px;
  color: var(--ink-900);
  text-decoration: none;
  transition: all 0.15s ease;
}
.ctl-mega__link:hover,
.ctl-mega__link:focus-visible {
  border-color: var(--primary);
  background: #fff;
  box-shadow: 0 0 0 3px rgba(14,129,226,0.1);
  outline: none;
  text-decoration: none;
}
.ctl-mega__icon {
  width: 22px;
  display: inline-grid;
  place-items: center;
  font-size: 16px;
}

/* --- CTA --- */
.ctl-nav__cta {
  /* margin-left: auto; */
}
.ctl-btn--primary {
  background: var(--primary);
  color: #fff;
  padding: 8px 16px;
  border-radius: 8px;
  font-weight: 600;
  text-decoration: none;
}
.ctl-btn--primary:hover { background: var(--primary-hover); }

/* --- Hover open behaviour --- */
@media (hover: hover) {
  .ctl-has-mega:hover > .ctl-mega {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }
}



/* ===== Hamburger button ===== */
.ctl-hamburger{
  display: none;
  align-items: center;
  justify-content: center;
  width: 42px; height: 42px;
  border-radius: 10px;
  border: 1px solid var(--line);
  background: var(--surface);
  cursor: pointer;
  flex-direction: column;
}
.ctl-hamburger__bar{
  width: 18px; height: 2px; background: var(--ink-900);
  display: block; position: relative;
}
.ctl-hamburger__bar + .ctl-hamburger__bar{ margin-top: 4px; }

/* ===== Backdrop ===== */
.ctl-backdrop{
  position: fixed; inset: 0;
  background: rgba(0,0,0,.38);
  opacity: 0; visibility: hidden;
  transition: opacity .2s ease;
  z-index: 60;
}
.ctl-backdrop.is-open{ opacity: 1; visibility: visible; }

/* ===== Drawer ===== */
.ctl-mobile-drawer{
  position: fixed; top: 0; right: 0;
  width: min(360px, 86vw); height: 100dvh;
  background: var(--surface);
  box-shadow: var(--shadow-lg);
  border-left: 1px solid var(--line);
  transform: translateX(100%);
  transition: transform .25s ease;
  z-index: 61;
  display: flex; flex-direction: column;
  background-color: #fff;
}
.ctl-mobile-drawer.is-open{ transform: translateX(0) translate3d(0,0,0); }
.ctl-mobile-drawer__head{
  display: flex; align-items: center; justify-content: space-between;
  padding: 16px; border-bottom: 1px solid var(--line);
}
.ctl-mobile-title{ font-weight: 600; }
.ctl-drawer-close{
  width: 40px; height: 40px; border-radius: 10px;
  border: 1px solid var(--line); background: var(--surface); cursor: pointer;
}
.ctl-drawer-close__x{ font-size: 22px; line-height: 1; }

/* ===== Mobile nav content ===== */
.ctl-mobile-nav{ padding: 8px 12px 24px; overflow: auto; }
.ctl-mobile-link, .ctl-accordion__btn{
  display: block; padding: 14px 12px; border-radius: 0px;
  border: none;
  border-bottom: 1px solid var(--line); color: var(--ink-900); text-decoration: none;
  margin-top: 10px;
  font-size: 15px;
  font-family: Poppins, sans-serif;
}
.ctl-mobile-link:hover{ border-color: var(--primary); text-decoration: none; }

.ctl-mobile-cta{
  display: inline-block; margin-top: 16px; padding: 10px 16px;
  border-radius: 999px; background: var(--primary); color: #fff; text-decoration: none;
}

/* ===== Accordion (Tools) ===== */
.ctl-accordion{ margin: 8px 0; }
.ctl-accordion__btn{
  width: 100%; text-align: left; padding: 14px 12px;
  border-radius: 0px; border-bottom: 1px solid var(--line);
  background: var(--surface); color: var(--ink-900);
  display: flex; align-items: center; justify-content: space-between;
  cursor: pointer;
}
.ctl-accordion__btn[aria-expanded="true"]{ border-color: var(--line); }
.ctl-accordion__chev{ transition: transform .15s ease; }
.ctl-accordion__btn[aria-expanded="true"] .ctl-accordion__chev{ transform: rotate(90deg); }

.ctl-accordion__panel{ padding: 8px 4px 0; }
.ctl-acc-list{ list-style: none; padding: 0; margin: 0; }
.ctl-acc-list li + li{ margin-top: 8px; }
.ctl-acc-list li {background-color: #F7F9FB;}
.ctl-acc-list a{
  display: block; padding: 12px; border-radius: 0px; border: none;
  color: var(--ink-900); text-decoration: none;
  font-size: 14px;
}
.ctl-acc-list a:hover{ border-color: var(--primary); text-decoration: none; }

/* ===== Mobile header visibility ===== */
@media (max-width: 900px) {
  .ctl-nav,
  .ctl-nav__cta,
  .ctl-has-mega .ctl-mega { display: none !important; }
  .ctl-hamburger { display: inline-flex; }
  .ctl-logo {
    font-size: 20px;
  }
  header {
    padding-inline: 15px;
  }
  .ctl-hamburger {
    display: flex;
  }
}